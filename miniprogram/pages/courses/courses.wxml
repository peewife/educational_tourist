<!--pages/courses/courses.wxml-->
<view class="page-container">
  <!-- 顶部固定区域：标题 -->
  <view class="header" style="padding-top: {{statusBarHeight}}px;">
    <view class="header-content">
      <!-- 标题栏 -->
      <view class="title-bar">
        <text class="app-title">研学课程</text>
      </view>
    </view>
  </view>

  <!-- 分类筛选栏 -->
  <view class="filter-bar" style="padding-top: {{statusBarHeight + 60}}px;">
    <scroll-view class="filter-scroll" scroll-x enable-flex>
      <view 
        wx:for="{{categories}}" 
        wx:key="id"
        class="filter-item {{currentCategory === item.id ? 'active' : ''}}"
        data-id="{{item.id}}"
        bindtap="onCategoryChange"
      >
        <text class="filter-text">{{item.name}}</text>
        <view wx:if="{{currentCategory === item.id}}" class="filter-indicator" />
      </view>
    </scroll-view>
  </view>

  <!-- 课程列表 -->
  <view class="course-list">
    <block wx:if="{{courseList.length > 0}}">
      <view 
        wx:for="{{courseList}}" 
        wx:key="id"
        class="course-item"
      >
        <!-- 课程大图 -->
        <view class="course-cover">
          <image class="cover-image" src="{{item.imageUrl}}" mode="aspectFill" />
          <view class="grade-tag">{{item.gradeLevel}}</view>
        </view>
        <!-- 课程信息 -->
        <view class="course-info" bindtap="onCourseTap" data-id="{{item.id}}">
          <text class="course-title">{{item.title}}</text>
          <view class="course-meta">
            <view class="meta-item">
              <t-icon name="user" size="24rpx" color="#999" />
              <text class="meta-text">{{item.studentCountText}} 学生</text>
            </view>
            <view class="meta-item">
              <t-icon name="star" size="24rpx" color="#999" />
              <text class="meta-text">{{item.ratingText}}</text>
            </view>
          </view>
        </view>
        <view class="course-divider" />
      </view>
    </block>

    <!-- 空状态 -->
    <empty-state 
      wx:if="{{!loading && courseList.length === 0}}"
      type="data"
      title="暂无课程"
      description="该分类下暂无课程内容"
    />

    <!-- 加载状态 -->
    <view wx:if="{{loading}}" class="loading-wrapper">
      <t-loading theme="circular" size="40rpx" text="加载中..." />
    </view>

    <!-- 没有更多 -->
    <view wx:if="{{!hasMore && courseList.length > 0}}" class="no-more">
      <text>— 已经到底了 —</text>
    </view>
  </view>

  <!-- 底部安全区域 -->
  <view class="safe-bottom" />
</view>
